<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>yêu cầu 6</title>
</head>
<body>
<script>
    class Customer {
        constructor(name, idCard, birthday, address, typeService, typeRoom, typeCustomer, discount, quantityIncluded, rentDay, email) {
            this.name = name;
            this.idcard = idCard;
            this.birthday = birthday;
            this.address = address;
            this.typeService = typeService;
            this.typeRoom = typeRoom;
            this.typeCustomer = typeCustomer;
            this.discount = discount;
            this.quatityIncluded = quantityIncluded;
            this.rentDay = rentDay;
            this.email = email;
        }


        setName(name) {
            this.name = name;
        }

        getName() {
            return this.name;
        }

        setIdcard(idcard) {
            this.idcard = idcard;
        }

        getIdcard() {
            return this.idcard;
        }

        setBirthday(birthday) {
            this.birthday = birthday;
        }

        getBirthday() {
            return this.birthday;
        }

        setAddRess(address) {
            this.address = address;
        }

        getAddRess() {
            return this.address;
        }

        setTypeService(typeService) {
            this.typeService = typeService;
        }

        getTypeService() {
            return this.typeService;
        }

        setTypeRoom(typeRoom) {
            this.typeRoom = typeRoom;
        }

        getTypeRoom() {
            return this.typeRoom;
        }

        setTypeCustomer(typeCustomer) {
            this.typeCustomer = typeCustomer;
        }

        getTypeCustomer() {
            return this.typeCustomer;
        }

        setDiscount(discount) {
            this.discount = discount;
        }

        getDiscount() {
            return this.discount;
        }

        setQuatityIncluded(quatityIncluded) {
            this.quatityIncluded = quatityIncluded;
        }

        getQuatityIncluded() {
            return this.quatityIncluded;
        }

        setRentday(rentDay) {
            this.rentday = rentDay;
        }

        getRentday() {
            return this.rentday;
        }

        setEmail(email) {
            this.email = email;
        }

        getEmail() {
            return this.email;
        }


        getTotalPay() {
            let money;
            if (this.typeService === "villa") {
                money = 500;
            } else if (this.typeService === "house") {
                money = 300;
            } else if (this.typeService === "room") {
                money = 100;
            }

            return (money * this.rentDay * (1 - (this.discount / 100)));
        }

        getInfor() {
            return "1.Tên\t" + this.name + "\n2.Số CMND\t" + this.idcard +
                "\n3.Địa chỉ\t" + this.address + "\n4.Sinh nhật\t" + this.birthday +
                "\n5.TypeService\t" + this.typeService
                + "\n6.typeRoom\t" + this.typeRoom + "\n7.typeCustomer\t" + this.typeCustomer + "" +
                "\n8.discount\t" + this.discount + "\n9.quantityIncluded\t" + this.quatityIncluded +
                "\n10.rentday\t" + this.rentDay + "\n11.email\t" + this.email;
        }

    }

    let listCustomer = [];

    function displayMainMenu() {
        let menu = prompt("Hãy nhập lựa chọn của bạn:\n" +
            "1.Add new customer\n" +
            "2.Display information customer\n" +
            "3.Edit information customer\n" +
            "4.Delete customer\n" +
            "5.Display totalpay of customer\n" +
            "6.Exit");
        switch (menu) {
            case'1':
                addNewCustomer();
                break;
            case'2':
                displayCustomer();
                break;
            case'3':
                EditInformationCustomer(listCustomer);
                break;
            case'4':
                deleteCustomer();
                break;
            case '5':
                displayTotalpayOfCustomer();
                break;
            case '6':
                break;

        }
    }

    //hiển thị
    function displayCustomer() {
        let chooseDisplay = prompt("choose your option:\n 1.Back to the main menu\n" + " 2.Customer's information");
        switch (chooseDisplay) {
            case '1':
                displayMainMenu();
                break;
            case '2':
                let temp = "";
                for (let i = 0; i < listCustomer.length; i++) {
                    temp += i + ".name: " + listCustomer[i].getName() + "\t" +
                        "CMND: " + listCustomer[i].getIdcard() + "\n"
                }
                let choose1 = parseInt(prompt(temp));
                alert(listCustomer[choose1].getInfor());
                break;

        }
        displayMainMenu();
    }

    //thêm mới
    displayMainMenu();

    function addNewCustomer() {
        let name = prompt("input name: ");
        let idcard;
        do {
            idcard = prompt("Enter the idcard: ");
            let check = isNaN(idcard);
            let check2 = idcard.indexOf("+");
            let check3 = idcard.indexOf("-");
            let check4 = idcard.indexOf(".");
            if ((check) || (idcard.length !== 9) ||
                (check2 > -1) ||
                (check3 > -1) ||
                (check4 > -1)) {
                alert("Chứng minh nhân  dân phải định dạng kiểu số và có 9 kí tự");
                continue;
            }
            break;
        } while (1);
        let address = prompt("input address: ");
        let birthday;
        do {
            birthday = prompt("input day of birth")
        } while (!checkday(birthday));

        let typeService = prompt("input type service: ");
        let typeRoom = prompt("input type room: ");
        let typeCustomer = prompt("input type customer: ");
        let discount;
        let check = false;
        do {
            discount = prompt("enter the discount");
            if (!isNaN(discount)) {
                discount = Number.parseInt(discount);
                check = true;
            } else {
                alert("Enter again")
            }

        } while (!check);
        let quatityIncluded;
        let check1 = false;
        do {
            quatityIncluded = prompt("enter the quatityincluded");
            if (!isNaN(quatityIncluded)) {
                quatityIncluded = Number.parseInt(quatityIncluded);
                check1 = true;
            } else {
                alert("enter again")
            }
        } while (!check1);
        let rentDay;
        let check2 = false;
        do {
            rentDay = (prompt("input rentday"));
            if (!isNaN(rentDay)) {
                rentDay = Number.parseInt(rentDay);
                check2 = true;
            } else {
                alert("nhập lại")
            }
        } while (!check2);
        let email;
        do {
            email = prompt("input email");
        } while (!kiemTraEmail(email));
        let customer = new Customer(name, idcard, birthday, address, typeService, typeRoom, typeCustomer, discount,
            quatityIncluded, rentDay, email);
        listCustomer.push(customer);
        displayMainMenu();
    }

    //kiểm tra email

    function kiemTraEmail(email) {
        let regex = /^\w{3,}@[a-zA-Z]{3,5}\.[a-zA-Z]{2,3}$/;
        return regex.test(email);
    }

    //kiểm tra tháng ngày
    function checkday(day) {
        let regex = /^((0[1-9])|([1-2][0-9])|(3[0-1]))\/(([0][1-9])|1[0-2])\/(19[0-9]{2}|20[0-1][0-9]{2}|2020)$/;
        return regex.test(day);
    }

    //sửa thông tin
    function EditInformationCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ".name: " + listCustomer[i].getName() + "\t" +
                "CMND: " + listCustomer[i].getIdcard() + "\n"
        }
        let choose1 = parseInt(prompt(temp));
        alert(listCustomer[choose1].getInfor());

        let choose = prompt(" Select the information to fix \n" +
            "1.Sữa tên \n" +
            "2.Sữa cmnd\n" +
            "3.Sữa địa chỉ:\n" +
            "4.Sửa ngày sinh \n" +
            "5.Sửa địa chỉ email\n" +
            "6.discount\n" +
            "7.Số ngày thuê \n" +
            "8.Số người đi kèm\n" +
            "9.Loại khách hạng\n" +
            "10.Sửa loại dịch vụ\n" +
            "11.Exit");
        switch (choose) {
            case '1':
                let name1 = prompt("Please enter the name again");
                listCustomer[choose1].setName(name1);
                displayMainMenu();
                break;
            case '2':
                let address1 = prompt("Please enter address again");
                listCustomer[choose1].setAddRess(address1);
                displayMainMenu();
                break;
            case '3':
                let idcard1;
                do {
                    idcard1 = prompt("Enter the idcard again: ");
                    let check = isNaN(idcard1);
                    let check2 = idcard1.indexOf("+");
                    let check3 = idcard1.indexOf("-");
                    let check4 = idcard1.indexOf(".");
                    if ((check) || (idcard1.length !== 9) ||
                        (check2 > -1) ||
                        (check3 > -1) ||
                        (check4 > -1)) {
                        alert("Chứng minh nhân  dân phải định dạng kiểu số và có 9 kí tự");
                        continue;
                    }
                    break;
                } while (1);
                listCustomer[choose1].setIdcard(idcard1);
                displayMainMenu();
                break;
            case '4':
                let birthday1;
                do {
                    birthday1 = prompt("Enter the day of birth again");
                } while (!checkday(birthday1));
                listCustomer[choose1].setBirthday(birthday1);
                displayMainMenu();
                break;
            case '5':
                let email1;
                do {
                    email1 = prompt("input email");
                } while (!kiemTraEmail(email1));
                listCustomer[choose1].setEmail(email1);
                displayMainMenu();
                break;
            case '6':
                let discount1;
                let check = false;
                do {
                    discount1 = prompt("enter the discount");
                    if (!isNaN(discount1)) {
                        discount1 = Number.parseInt(discount1);
                        check = true;
                    } else {
                        alert("Enter again")
                    }

                } while (!check);
                listCustomer[choose1].setDiscount(discount1);
                displayMainMenu();
                break;

            case '7':
                let rentDay1;
                do {
                    rentDay1 = prompt("input rentday");
                    let checkRD = isNaN(rentDay1);
                    let checkRD2 = rentDay1.indexOf("-");
                    if ((checkRD) || (checkRD2 > -1)) {
                        alert("Số ngày thuê nhập sai định dạng");
                        continue;
                    }
                    break;
                } while (1);
                listCustomer[choose1].setRentday(rentDay1);
                displayMainMenu();
                break;
            case '8':
                let quatityIncluded1;
                let check1 = false;
                do {
                    quatityIncluded1 = prompt("enter the quatityincluded");
                    if (!isNaN(quatityIncluded1)) {
                        quatityIncluded1 = Number.parseInt(quatityIncluded1);
                        check1 = true;
                    } else {
                        alert("enter again")
                    }
                } while (!check1);
                listCustomer[choose1].setDiscount(quatityIncluded1);
                displayMainMenu();
                break;

            case '9':
                let typeCustomer1 = prompt("Enter the type customer again");
                listCustomer[choose1].setTypeCustomer(typeCustomer1);
                displayMainMenu();
                break;
            case'10':
                let typeService1 = prompt("Enter the type service again ");
                listCustomer[choose1].setTypeService(typeService1);
                displayMainMenu();
                break;

            case '11':
                break;

        }

    }

    //xóa thông tin
    function deleteCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ".name: " + listCustomer[i].getName() + "\t" +
                "CMND: " + listCustomer[i].getIdcard() + "\n"
        }
        let choose1 = parseInt(prompt(temp));
        alert(listCustomer[choose1].getInfor());
        let confirmDelte = confirm("Do you really want to delete this customer?");
        if (confirmDelte) {
            listCustomer.splice(choose1, 1);
            displayMainMenu();
        } else {
            alert("you do not delete this customer");
            displayMainMenu();
        }

    }

    // hiển thị giá tiền
    function displayTotalpayOfCustomer() {

        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ".name: " + listCustomer[i].getName() + "\t" +
                "CMND: " + listCustomer[i].getIdcard() + "\n"
        }
        let choose1 = parseInt(prompt(temp));
        alert(listCustomer[choose1].getTotalPay());
        displayMainMenu();
    }

    //class employee
    class employee {
        constructor(nameEmployee, jobPosition, idCardEmployee, numberOfPhone, emailEmployee, level, salary, birthdayOfEmployee) {
            this.nameEmployee = nameEmployee;
            this.jobPosition = jobPosition;
            this.idCardEmployee = idCardEmployee;
            this.numberOfPhone = numberOfPhone;
            this.emailEmployee = emailEmployee;
            this.level = level;
            this.salary = salary;
            this.birthdayOfEmployee = birthdayOfEmployee;
        }

        getNameEmployee() {
            return this.nameEmployee;
        }

        getJobPosition() {
            return this.jobPosition;
        }

        getIdCardEmployee() {
            return this.idCardEmployee;
        }

        getNumberOfPhone() {
            return this.numberOfPhone;
        }

        getEmailEmployee() {
            return this.emailEmployee;
        }

        getLevel() {
            return this.level;
        }

        getSalary() {
            return this.salary;
        }

        getBirthdayOfEmployee() {
            return this.birthdayOfEmployee;
        }

        setNameEmployee(nameEmployee) {
            this.nameEmployee = nameEmployee;
        }

        setJobPosition(jobPositon) {
            this.jobPosition = jobPositon;
        }

        setIdCardEmployee(idCardEmployee) {
            this.idCardEmployee = idCardEmployee;
        }

        setNumberOfPhone(numberOfPhone) {
            this.numberOfPhone = numberOfPhone;
        }

        setEmailEmployee(emailEmployee) {
            this.emailEmployee = emailEmployee;
        }

        setLevel(level) {
            this.level = level;
        }

        setSalary(salary) {
            this.salary = salary;
        }

        setBirthdayOfEmployee(birthdayOfEmployee) {
            this.birthdayOfEmployee = birthdayOfEmployee;
        }
    }
</script>

</body>
</html>